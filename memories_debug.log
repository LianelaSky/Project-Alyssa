2025-04-22 01:20:33,537 - DEBUG    - memory.longterm - LongTermMemoryFile initialized.
2025-04-22 01:20:33,537 - DEBUG    - memory.active   - ActiveMemoryFile initialized. Threshold: 25, Summary Size: 5
2025-04-22 01:20:33,538 - DEBUG    - memory.dynamic  - DynamicMemory initialized. Location: Science class, Action: Waiting before the project discussion, Last Narrative: *Is waiting impatiently.*
2025-04-22 01:20:35,592 - INFO     - memory.vector   - Initializing VectorMemoryStore...
2025-04-22 01:20:37,664 - INFO     - memory.vector   - Loaded SentenceTransformer model: all-MiniLM-L6-v2
2025-04-22 01:20:37,665 - INFO     - memory.vector   - Inferred embedding dimension: 384
2025-04-22 01:20:37,665 - INFO     - memory.vector   - Initialized FAISS IndexIDMap with IndexFlatL2 (dim=384)
2025-04-22 01:20:37,665 - INFO     - memory.vector   - VectorMemoryStore initialized successfully.
2025-04-22 01:20:37,665 - INFO     - memory.vector   - Attempting to load FAISS index from memory_index.faiss and data from memory_data.json...
2025-04-22 01:20:37,665 - WARNING  - memory.vector   - Memory files not found (memory_index.faiss or memory_data.json). Starting with empty memory.
2025-04-22 01:20:37,666 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-22 01:20:37,666 - DEBUG    - memory.vector   - Input text: 'Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Scienc...'
2025-04-22 01:20:37,666 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745306437.6662884, 'roleplay_time': '2025-04-16T14:00:00', 'location': 'Science class', 'action': 'Waiting before the project discussion', 'topic': 'Initial Setup / Project Discussion', 'type': 'system_context'}
2025-04-22 01:20:37,711 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-22 01:20:37,712 - INFO     - memory.vector   - Added memory ID 0 to store and FAISS index. Index size: 1
2025-04-22 01:20:37,712 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Input memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They a...'
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): []
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Relevance check for 'System Context: Background: Lin fell asleep at Pop...': True
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-22 01:20:37,712 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...'
2025-04-22 01:20:37,712 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-22 01:20:37,712 - DEBUG    - memory.active   - Input memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They a...'
2025-04-22 01:20:37,712 - DEBUG    - memory.active   - Current active memory state (before add, size 0): []
2025-04-22 01:20:37,712 - INFO     - memory.active   - Added to active memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...'
2025-04-22 01:20:37,712 - DEBUG    - memory.active   - Active memory state (after add, size 1): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-22 01:20:37,712 - DEBUG    - memory.active   - Message count incremented to: 1
2025-04-22 01:20:37,713 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-22 01:20:37,713 - INFO     - memory.dynamic  - Added to dynamic: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...' | Proposed relevant to active.
2025-04-22 01:20:37,714 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-22 01:21:27,123 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Waiting before the project discussion', 'recent_memories': "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."}
2025-04-22 01:21:27,123 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-22 01:21:27,123 - DEBUG    - memory.vector   - Query text: 'I... I'm really sorry... I didn't want to be... Be like that... Im really sorry... Topic: Initial Se...'
2025-04-22 01:21:27,123 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-22 01:21:27,151 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-22 01:21:27,151 - DEBUG    - memory.vector   - Searching FAISS index with k=1
2025-04-22 01:21:27,171 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.7700942]], IDs: [[0]]
2025-04-22 01:21:27,171 - DEBUG    - memory.vector   - Retrieved relevant memory ID 0 with distance 1.7700941562652588
2025-04-22 01:21:27,171 - INFO     - memory.vector   - Retrieved 1 relevant memories for query.
2025-04-22 01:21:27,171 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-22 01:22:33,381 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-22 01:22:33,382 - DEBUG    - memory.dynamic  - Input memory: 'User: 'I... I'm really sorry... I didn't want to be... Be like that... Im really sorry...'. Poppy: '...'
2025-04-22 01:22:33,382 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-22 01:22:33,382 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'I... I'm really sorry... I didn't want to b...': True
2025-04-22 01:22:33,382 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-22 01:22:33,382 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-22 01:22:33,382 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-22 01:22:33,383 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'I... I'm really sorry... I didn't want to be... Be like that......'
2025-04-22 01:22:33,383 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-22 01:22:33,383 - DEBUG    - memory.active   - Input memory: 'User: 'I... I'm really sorry... I didn't want to be... Be like that... Im really sorry...'. Poppy: '...'
2025-04-22 01:22:33,383 - DEBUG    - memory.active   - Current active memory state (before add, size 1): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-22 01:22:33,383 - INFO     - memory.active   - Added to active memory: 'User: 'I... I'm really sorry... I didn't want to be... Be like that......'
2025-04-22 01:22:33,383 - DEBUG    - memory.active   - Active memory state (after add, size 2): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-22 01:22:33,383 - DEBUG    - memory.active   - Message count incremented to: 2
2025-04-22 01:22:33,383 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-22 01:22:33,383 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'I... I'm really sorry... I didn't want to be... Be like that......' | Proposed relevant to active.
2025-04-22 01:22:33,383 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-22 01:22:33,383 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-22 01:22:33,383 - DEBUG    - memory.vector   - Input text: 'User: 'I... I'm really sorry... I didn't want to be... Be like that... Im really sorry...'
Poppy: '*...'
2025-04-22 01:22:33,383 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745306553.383802, 'roleplay_time': '2025-04-16T14:05:47.143787', 'location': 'Science class', 'action': 'Waiting before the project discussion', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.16, 'connection': 0.11, 'autonomy': 0.96, 'validation': 0.29, 'authenticity': 0.36, 'psychological_safety': 0.2, 'grieving': 0.02, 'joy': 0.2, 'anger': 0.51, 'fear': 0.73, 'shame': 0.76, 'anticipation': 0.2, 'disgust': 0.11}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-22 01:22:33,573 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-22 01:22:33,574 - INFO     - memory.vector   - Added memory ID 1 to store and FAISS index. Index size: 2
2025-04-22 01:22:33,574 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-22 01:22:33,574 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It's okay. Let's just move on."*
2025-04-22 01:22:33,574 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Is waiting impatiently.*' to '*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It's okay. Let's just move on."*'
2025-04-22 01:24:23,569 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Waiting before the project discussion', 'recent_memories': 'System Context: Background: Lin fell asleep at Poppy\'s house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work. | User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-22 01:24:23,569 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-22 01:24:23,569 - DEBUG    - memory.vector   - Query text: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... ...'
2025-04-22 01:24:23,569 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-22 01:24:23,633 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-22 01:24:23,633 - DEBUG    - memory.vector   - Searching FAISS index with k=2
2025-04-22 01:24:23,635 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.3622354 1.490489 ]], IDs: [[1 0]]
2025-04-22 01:24:23,635 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.362235426902771
2025-04-22 01:24:23,635 - DEBUG    - memory.vector   - Retrieved relevant memory ID 0 with distance 1.4904890060424805
2025-04-22 01:24:23,636 - INFO     - memory.vector   - Retrieved 2 relevant memories for query.
2025-04-22 01:24:23,636 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-22 01:25:17,218 - INFO     - memory.dynamic  - Dynamic current_action updating from 'Waiting before the project discussion' to 'Talking'
2025-04-22 01:25:17,219 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-22 01:25:17,219 - DEBUG    - memory.dynamic  - Input memory: 'User: 'Before you came to class, I talked with the teacher, she let us give her the project in two d...'
2025-04-22 01:25:17,219 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-22 01:25:17,219 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'Before you came to class, I talked with the...': True
2025-04-22 01:25:17,219 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-22 01:25:17,220 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-22 01:25:17,220 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-22 01:25:17,220 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'Before you came to class, I talked with the teacher, she let us...'
2025-04-22 01:25:17,220 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-22 01:25:17,220 - DEBUG    - memory.active   - Input memory: 'User: 'Before you came to class, I talked with the teacher, she let us give her the project in two d...'
2025-04-22 01:25:17,220 - DEBUG    - memory.active   - Current active memory state (before add, size 2): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-22 01:25:17,220 - INFO     - memory.active   - Added to active memory: 'User: 'Before you came to class, I talked with the teacher, she let us...'
2025-04-22 01:25:17,220 - DEBUG    - memory.active   - Active memory state (after add, size 3): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-22 01:25:17,220 - DEBUG    - memory.active   - Message count incremented to: 3
2025-04-22 01:25:17,220 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-22 01:25:17,220 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'Before you came to class, I talked with the teacher, she let us...' | Proposed relevant to active.
2025-04-22 01:25:17,220 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-22 01:25:17,221 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-22 01:25:17,221 - DEBUG    - memory.vector   - Input text: 'User: 'Before you came to class, I talked with the teacher, she let us give her the project in two d...'
2025-04-22 01:25:17,221 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745306717.2210205, 'roleplay_time': '2025-04-16T14:13:58.658832', 'location': 'Science class', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.07, 'connection': 0.06, 'autonomy': -0.17, 'validation': 0.28, 'authenticity': 0.24, 'psychological_safety': 0.2, 'grieving': 0.06, 'joy': 0.69, 'anger': 0.23, 'fear': 0.84, 'shame': 1.0, 'anticipation': 0.22, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-22 01:25:17,274 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-22 01:25:17,274 - INFO     - memory.vector   - Added memory ID 2 to store and FAISS index. Index size: 3
2025-04-22 01:25:17,274 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-22 01:25:17,274 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*
2025-04-22 01:25:17,274 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It's okay. Let's just move on."*' to '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*'
2025-04-22 01:27:41,385 - INFO     - memory.vector   - Saving FAISS index to memory_index.faiss and data to memory_data.json...
2025-04-22 01:27:41,386 - DEBUG    - memory.vector   - Writing FAISS index with 3 vectors.
2025-04-22 01:27:41,390 - INFO     - memory.vector   - Memory saved successfully.
2025-04-23 00:11:57,481 - DEBUG    - memory.longterm - LongTermMemoryFile initialized.
2025-04-23 00:11:57,481 - DEBUG    - memory.active   - ActiveMemoryFile initialized. Threshold: 25, Summary Size: 5
2025-04-23 00:11:57,481 - DEBUG    - memory.dynamic  - DynamicMemory initialized. Location: Science class, Action: Waiting before the project discussion, Last Narrative: *Is waiting impatiently.*
2025-04-23 00:11:59,541 - INFO     - memory.vector   - Initializing VectorMemoryStore...
2025-04-23 00:12:01,514 - INFO     - memory.vector   - Loaded SentenceTransformer model: all-MiniLM-L6-v2
2025-04-23 00:12:01,514 - INFO     - memory.vector   - Inferred embedding dimension: 384
2025-04-23 00:12:01,515 - INFO     - memory.vector   - Initialized FAISS IndexIDMap with IndexFlatL2 (dim=384)
2025-04-23 00:12:01,515 - INFO     - memory.vector   - VectorMemoryStore initialized successfully.
2025-04-23 00:12:01,515 - INFO     - memory.vector   - Attempting to load FAISS index from memory_index.faiss and data from memory_data.json...
2025-04-23 00:12:01,527 - INFO     - memory.vector   - Loaded FAISS index. Size: 3
2025-04-23 00:12:01,528 - INFO     - memory.vector   - Loaded memory data (3 items). Next ID: 3
2025-04-23 00:12:01,528 - INFO     - memory.vector   - Index and data sizes match.
2025-04-23 00:12:01,530 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:12:01,530 - DEBUG    - memory.vector   - Input text: 'Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Scienc...'
2025-04-23 00:12:01,530 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745388721.530802, 'roleplay_time': '2025-04-16T14:00:00', 'location': 'Science class', 'action': 'Talking', 'topic': 'Initial Setup / Project Discussion', 'type': 'system_context'}
2025-04-23 00:12:01,664 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:12:01,665 - INFO     - memory.vector   - Added memory ID 3 to store and FAISS index. Index size: 4
2025-04-23 00:12:01,665 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - Input memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They a...'
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - Relevance check for 'System Context: Background: Lin fell asleep at Pop...': True
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:12:01,665 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-23 00:12:01,666 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...'
2025-04-23 00:12:01,666 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:12:01,666 - DEBUG    - memory.active   - Input memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They a...'
2025-04-23 00:12:01,666 - DEBUG    - memory.active   - Current active memory state (before add, size 0): []
2025-04-23 00:12:01,666 - INFO     - memory.active   - Added to active memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...'
2025-04-23 00:12:01,666 - DEBUG    - memory.active   - Active memory state (after add, size 1): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-23 00:12:01,666 - DEBUG    - memory.active   - Message count incremented to: 1
2025-04-23 00:12:01,666 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:12:01,666 - DEBUG    - memory.dynamic  - Popped oldest memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They a...'
2025-04-23 00:12:01,666 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-23 00:12:01,666 - INFO     - memory.dynamic  - Added to dynamic: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...' | Proposed relevant to active. | Popped oldest due to capacity: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...'
2025-04-23 00:12:01,666 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:14:02,307 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Talking', 'recent_memories': 'User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*\'. Poppy: \'*Poppy gives a faint, forced smile, her eyes briefly meeting Lin\'s before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that\'s a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we\'re behind? Because I\'m not keen on looking like the bad guy here.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False] | System Context: Background: Lin fell asleep at Poppy\'s house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.'}
2025-04-23 00:14:02,308 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:14:02,308 - DEBUG    - memory.vector   - Query text: '*I just smile shyly touching my own pinky fingers* Hehe... Topic: Initial Setup / Project Discussion...'
2025-04-23 00:14:02,308 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:14:02,362 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:14:02,362 - DEBUG    - memory.vector   - Searching FAISS index with k=4
2025-04-23 00:14:02,386 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.4221874 1.4788809 1.7238185 1.7238185]], IDs: [[2 1 0 3]]
2025-04-23 00:14:02,386 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.4221874475479126
2025-04-23 00:14:02,386 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.4788808822631836
2025-04-23 00:14:02,386 - DEBUG    - memory.vector   - Retrieved relevant memory ID 0 with distance 1.7238185405731201
2025-04-23 00:14:02,387 - DEBUG    - memory.vector   - Retrieved relevant memory ID 3 with distance 1.7238185405731201
2025-04-23 00:14:02,387 - INFO     - memory.vector   - Retrieved 4 relevant memories for query.
2025-04-23 00:14:02,387 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:15:34,795 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:15:34,796 - DEBUG    - memory.dynamic  - Input memory: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes sl...'
2025-04-23 00:15:34,796 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-23 00:15:34,796 - DEBUG    - memory.dynamic  - Relevance check for 'User: '*I just smile shyly touching my own pinky f...': True
2025-04-23 00:15:34,796 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:15:34,796 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:15:34,796 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'I... I\'m really sorry... I didn\'t want to be... Be like that... Im really sorry...\'. Poppy: \'*Poppy avoids eye contact, her shoulders tense as she quietly murmurs, "It\'s okay. Let\'s just move on."*\n\nYou know, I appreciate the apology, but let\'s just focus on what we need to do now. We have a project to complete, and I\'m not about to let your... issues hold us back. So, what\'s the plan? Let\'s get this over with.\'. [Loc: Science class] [Act: Waiting before the project discussion] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Fearful, In Control, Inauthentic, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:15:34,797 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Po...'
2025-04-23 00:15:34,797 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:15:34,797 - DEBUG    - memory.active   - Input memory: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes sl...'
2025-04-23 00:15:34,797 - DEBUG    - memory.active   - Current active memory state (before add, size 1): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work."]
2025-04-23 00:15:34,797 - INFO     - memory.active   - Added to active memory: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Po...'
2025-04-23 00:15:34,797 - DEBUG    - memory.active   - Active memory state (after add, size 2): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:15:34,797 - DEBUG    - memory.active   - Message count incremented to: 2
2025-04-23 00:15:34,797 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:15:34,797 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'I... I'm really sorry... I didn't want to be... Be like that... Im really sorry...'. Poppy: '...'
2025-04-23 00:15:34,797 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ["User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:15:34,797 - INFO     - memory.dynamic  - Added to dynamic: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Po...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'I... I'm really sorry... I didn't want to be... Be like that......'
2025-04-23 00:15:34,797 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:15:34,798 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:15:34,798 - DEBUG    - memory.vector   - Input text: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'
Poppy: '*Poppy rolls her eyes sli...'
2025-04-23 00:15:34,798 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745388934.7980464, 'roleplay_time': '2025-04-16T14:10:39.800131', 'location': 'Science class', 'action': 'Talking', 'topic': 'Food/Snacks Discussion', 'emotions': {'vulnerability': 0.15, 'connection': 0.07, 'autonomy': -0.14, 'validation': 0.29, 'authenticity': 0.26, 'psychological_safety': 0.2, 'grieving': 0.02, 'joy': 0.68, 'anger': 0.29, 'fear': 0.52, 'shame': 0.75, 'anticipation': 0.22, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:15:34,865 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:15:34,865 - INFO     - memory.vector   - Added memory ID 4 to store and FAISS index. Index size: 5
2025-04-23 00:15:34,866 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:15:34,866 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*
2025-04-23 00:15:34,866 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*' to '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*'
2025-04-23 00:16:14,262 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Talking', 'recent_memories': "User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False] | System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work. | User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]"}
2025-04-23 00:16:14,262 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:16:14,263 - DEBUG    - memory.vector   - Query text: 'I just... Uhm... *I look away to then whisper the next words* Had an overdose... Topic: Food/Snacks ...'
2025-04-23 00:16:14,263 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:16:14,293 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:16:14,293 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.2767996 1.3409046 1.374713  1.6268301 1.6268301]], IDs: [[1 2 4 0 3]]
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.2767995595932007
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.3409045934677124
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.3747129440307617
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - Retrieved relevant memory ID 0 with distance 1.6268301010131836
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - Retrieved relevant memory ID 3 with distance 1.6268301010131836
2025-04-23 00:16:14,294 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:16:14,294 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:17:33,899 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:17:33,899 - DEBUG    - memory.dynamic  - Input memory: 'User: 'I just... Uhm... *I look away to then whisper the next words* Had an overdose...'. Poppy: '*P...'
2025-04-23 00:17:33,899 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:17:33,899 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'I just... Uhm... *I look away to then whisp...': True
2025-04-23 00:17:33,899 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:17:33,900 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:17:33,900 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["User: 'Before you came to class, I talked with the teacher, she let us give her the project in two days... Or it was three? Anyway, we have more time *I smile softly looking at you*'. Poppy: '*Poppy gives a faint, forced smile, her eyes briefly meeting Lin's before flickering away, her hands fidgeting nervously with the edge of her notebook*\n\nWell, that's a relief. I guess we have a bit more time to salvage this mess. So, what exactly did you tell her? Did you mention why we're behind? Because I'm not keen on looking like the bad guy here.'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Unsafe, Ashamed, Powerless, Fearful, Inauthentic, Joyful, Isolated, Fatigued, Invalidated] [Fatigue: 100.0] [Sleeping: False]", "System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:17:33,901 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'I just... Uhm... *I look away to then whisper the next words* H...'
2025-04-23 00:17:33,901 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:17:33,902 - DEBUG    - memory.active   - Input memory: 'User: 'I just... Uhm... *I look away to then whisper the next words* Had an overdose...'. Poppy: '*P...'
2025-04-23 00:17:33,902 - DEBUG    - memory.active   - Current active memory state (before add, size 2): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:17:33,902 - INFO     - memory.active   - Added to active memory: 'User: 'I just... Uhm... *I look away to then whisper the next words* H...'
2025-04-23 00:17:33,903 - DEBUG    - memory.active   - Active memory state (after add, size 3): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:17:33,903 - DEBUG    - memory.active   - Message count incremented to: 3
2025-04-23 00:17:33,903 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:17:33,903 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'Before you came to class, I talked with the teacher, she let us give her the project in two d...'
2025-04-23 00:17:33,903 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:17:33,903 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'I just... Uhm... *I look away to then whisper the next words* H...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'Before you came to class, I talked with the teacher, she let us...'
2025-04-23 00:17:33,903 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:17:33,903 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:17:33,903 - DEBUG    - memory.vector   - Input text: 'User: 'I just... Uhm... *I look away to then whisper the next words* Had an overdose...'
Poppy: '*Po...'
2025-04-23 00:17:33,903 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745389053.9036732, 'roleplay_time': '2025-04-16T14:16:37.109675', 'location': 'Science class', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.11, 'connection': 0.08, 'autonomy': 0.05, 'validation': 0.28, 'authenticity': 0.22, 'psychological_safety': 0.2, 'grieving': 0.06, 'joy': 0.79, 'anger': 0.35, 'fear': 0.63, 'shame': 0.84, 'anticipation': 0.25, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:17:34,023 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:17:34,023 - INFO     - memory.vector   - Added memory ID 5 to store and FAISS index. Index size: 6
2025-04-23 00:17:34,023 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:17:34,024 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's eyes widen in alarm, her hand instinctively reaching out to grab Lin's arm, her voice dropping to a hushed, urgent whisper.*
2025-04-23 00:17:34,024 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*' to '*Poppy's eyes widen in alarm, her hand instinctively reaching out to grab Lin's arm, her voice dropping to a hushed, urgent whisper.*'
2025-04-23 00:18:34,237 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Talking', 'recent_memories': 'System Context: Background: Lin fell asleep at Poppy\'s house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work. | User: \'*I just smile shyly touching my own pinky fingers* Hehe...\'. Poppy: \'*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we\'re just going to ignore the elephant in the room? Fine by me. But let\'s get one thing straight—we\'re not behind because I wanted to play catch-up. We\'re behind because you... well, you know why. So, let\'s not waste this extra time. What do we need to do to get this project back on track? And don\'t just stand there smiling—tell me what you\'ve got in mind.\'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:18:34,237 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:18:34,237 - DEBUG    - memory.vector   - Query text: 'We... Uh, we can go outside school? To a more private place? Topic: Personal/Emotional Discussion...'
2025-04-23 00:18:34,237 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.4194    1.4269314 1.5702641 1.7171314 1.7831059]], IDs: [[4 2 1 5 0]]
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.4193999767303467
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.426931381225586
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.5702641010284424
2025-04-23 00:18:34,264 - DEBUG    - memory.vector   - Retrieved relevant memory ID 5 with distance 1.7171313762664795
2025-04-23 00:18:34,265 - DEBUG    - memory.vector   - Retrieved relevant memory ID 0 with distance 1.7831058502197266
2025-04-23 00:18:34,265 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:18:34,265 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:19:21,377 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:19:21,377 - DEBUG    - memory.dynamic  - Input memory: 'User: 'We... Uh, we can go outside school? To a more private place?'. Poppy: '*"Poppy hesitates, her...'
2025-04-23 00:19:21,377 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:19:21,378 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'We... Uh, we can go outside school? To a mo...': False
2025-04-23 00:19:21,378 - DEBUG    - memory.dynamic  - Is new memory relevant? False
2025-04-23 00:19:21,378 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:19:21,378 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:19:21,378 - DEBUG    - memory.dynamic  - Popped oldest memory: 'System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They a...'
2025-04-23 00:19:21,379 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ["User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:19:21,379 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'We... Uh, we can go outside school? To a more private place?'. ...' | Popped oldest due to capacity: 'System Context: Background: Lin fell asleep at Poppy's house yesterday...'
2025-04-23 00:19:21,379 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:19:21,379 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:19:21,379 - DEBUG    - memory.vector   - Input text: 'User: 'We... Uh, we can go outside school? To a more private place?'
Poppy: '*"Poppy hesitates, her ...'
2025-04-23 00:19:21,379 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745389161.379284, 'roleplay_time': '2025-04-16T14:21:59.544539', 'location': 'Science class', 'action': 'Talking', 'topic': 'Location/Transition Discussion', 'emotions': {'vulnerability': 0.04, 'connection': 0.09, 'autonomy': 0.06, 'validation': 0.2, 'authenticity': 0.19, 'psychological_safety': 0.2, 'grieving': 0.1, 'joy': 0.88, 'anger': 0.23, 'fear': 0.75, 'shame': 0.85, 'anticipation': 0.29, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:19:21,482 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:19:21,482 - INFO     - memory.vector   - Added memory ID 6 to store and FAISS index. Index size: 7
2025-04-23 00:19:21,483 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:19:21,483 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *"Poppy hesitates, her grip on Lin's arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*
2025-04-23 00:19:21,483 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's eyes widen in alarm, her hand instinctively reaching out to grab Lin's arm, her voice dropping to a hushed, urgent whisper.*' to '*"Poppy hesitates, her grip on Lin's arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*'
2025-04-23 00:19:47,310 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Talking', 'recent_memories': 'User: \'*I just smile shyly touching my own pinky fingers* Hehe...\'. Poppy: \'*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we\'re just going to ignore the elephant in the room? Fine by me. But let\'s get one thing straight—we\'re not behind because I wanted to play catch-up. We\'re behind because you... well, you know why. So, let\'s not waste this extra time. What do we need to do to get this project back on track? And don\'t just stand there smiling—tell me what you\'ve got in mind.\'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:19:47,310 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:19:47,310 - DEBUG    - memory.vector   - Query text: 'What time it is? We can wait until classes finishes Topic: Location/Transition Discussion...'
2025-04-23 00:19:47,310 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:19:47,337 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:19:47,337 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.278008  1.4210548 1.5842792 1.5842792 1.6141679]], IDs: [[6 2 0 3 4]]
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - Retrieved relevant memory ID 6 with distance 1.278007984161377
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.4210548400878906
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - Retrieved relevant memory ID 0 with distance 1.584279179573059
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - Retrieved relevant memory ID 3 with distance 1.584279179573059
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.6141679286956787
2025-04-23 00:19:47,338 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:19:47,338 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Input memory: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*Poppy glances at the clock, he...'
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'What time it is? We can wait until classes ...': True
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:20:43,167 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*...'
2025-04-23 00:20:43,167 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:20:43,167 - DEBUG    - memory.active   - Input memory: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*Poppy glances at the clock, he...'
2025-04-23 00:20:43,167 - DEBUG    - memory.active   - Current active memory state (before add, size 3): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:20:43,168 - INFO     - memory.active   - Added to active memory: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*...'
2025-04-23 00:20:43,168 - DEBUG    - memory.active   - Active memory state (after add, size 4): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:20:43,168 - DEBUG    - memory.active   - Message count incremented to: 4
2025-04-23 00:20:43,168 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:20:43,168 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes sl...'
2025-04-23 00:20:43,168 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:20:43,168 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Po...'
2025-04-23 00:20:43,168 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:20:43,168 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:20:43,168 - DEBUG    - memory.vector   - Input text: 'User: 'What time it is? We can wait until classes finishes'
Poppy: '*Poppy glances at the clock, her...'
2025-04-23 00:20:43,168 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745389243.1683316, 'roleplay_time': '2025-04-16T14:26:04.915691', 'location': 'Science class', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.05, 'connection': 0.09, 'autonomy': 0.07, 'validation': 0.15, 'authenticity': 0.17, 'psychological_safety': 0.2, 'grieving': 0.14, 'joy': 0.85, 'anger': 0.26, 'fear': 0.89, 'shame': 0.85, 'anticipation': 0.32, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:20:43,207 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:20:43,207 - INFO     - memory.vector   - Added memory ID 7 to store and FAISS index. Index size: 8
2025-04-23 00:20:43,207 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:20:43,208 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It's almost over, just a few more minutes."*
2025-04-23 00:20:43,208 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*"Poppy hesitates, her grip on Lin's arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*' to '*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It's almost over, just a few more minutes."*'
2025-04-23 00:22:23,389 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Talking', 'recent_memories': 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:22:23,389 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:22:23,389 - DEBUG    - memory.vector   - Query text: '*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair bein...'
2025-04-23 00:22:23,389 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:22:23,439 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:22:23,439 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:22:23,440 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.2375624 1.2770703 1.338746  1.347513  1.3791057]], IDs: [[7 1 6 4 2]]
2025-04-23 00:22:23,441 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 1.2375624179840088
2025-04-23 00:22:23,441 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.2770702838897705
2025-04-23 00:22:23,441 - DEBUG    - memory.vector   - Retrieved relevant memory ID 6 with distance 1.3387459516525269
2025-04-23 00:22:23,441 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.34751296043396
2025-04-23 00:22:23,441 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.3791056871414185
2025-04-23 00:22:23,441 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:22:23,441 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Input memory: 'User: '*I just sit next to you, sighing and then putting my head over your shoulder, with my long ha...'
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Relevance check for 'User: '*I just sit next to you, sighing and then p...': True
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:24:11,186 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: '*I just sit next to you, sighing and then putting my head over ...'
2025-04-23 00:24:11,186 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:24:11,186 - DEBUG    - memory.active   - Input memory: 'User: '*I just sit next to you, sighing and then putting my head over your shoulder, with my long ha...'
2025-04-23 00:24:11,187 - DEBUG    - memory.active   - Current active memory state (before add, size 4): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:24:11,187 - INFO     - memory.active   - Added to active memory: 'User: '*I just sit next to you, sighing and then putting my head over ...'
2025-04-23 00:24:11,187 - DEBUG    - memory.active   - Active memory state (after add, size 5): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:24:11,187 - DEBUG    - memory.active   - Message count incremented to: 5
2025-04-23 00:24:11,187 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:24:11,187 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'I just... Uhm... *I look away to then whisper the next words* Had an overdose...'. Poppy: '*P...'
2025-04-23 00:24:11,187 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:24:11,187 - INFO     - memory.dynamic  - Added to dynamic: 'User: '*I just sit next to you, sighing and then putting my head over ...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'I just... Uhm... *I look away to then whisper the next words* H...'
2025-04-23 00:24:11,187 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:24:11,187 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:24:11,187 - DEBUG    - memory.vector   - Input text: 'User: '*I just sit next to you, sighing and then putting my head over your shoulder, with my long ha...'
2025-04-23 00:24:11,187 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745389451.1878085, 'roleplay_time': '2025-04-16T14:36:28.971889', 'location': 'Science class', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.13, 'connection': 0.04, 'autonomy': 0.06, 'validation': 0.11, 'authenticity': 0.01, 'psychological_safety': 0.06, 'grieving': 0.17, 'joy': 0.87, 'anger': 0.25, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.49, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:24:11,270 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:24:11,270 - INFO     - memory.vector   - Added memory ID 8 to store and FAISS index. Index size: 9
2025-04-23 00:24:11,271 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:24:11,271 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*
2025-04-23 00:24:11,271 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It's almost over, just a few more minutes."*' to '*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*'
2025-04-23 00:26:28,408 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Science class', 'action': 'Talking', 'recent_memories': 'User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:26:28,409 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:26:28,409 - DEBUG    - memory.vector   - Query text: '*I grab your hand, my tiny and delicate pale hand starts caressing yours* It's unexpected, it isn't?...'
2025-04-23 00:26:28,409 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:26:28,437 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.0080873 1.118815  1.15505   1.161351  1.2606661]], IDs: [[8 6 4 7 2]]
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - Retrieved relevant memory ID 8 with distance 1.0080872774124146
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - Retrieved relevant memory ID 6 with distance 1.1188149452209473
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.1550500392913818
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 1.161350965499878
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.2606661319732666
2025-04-23 00:26:28,438 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:26:28,438 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:28:39,691 - INFO     - memory.dynamic  - Dynamic current_action updating from 'Talking' to 'Starting the project'
2025-04-23 00:28:39,692 - INFO     - memory.dynamic  - Dynamic location updating from 'Science class' to 'School'
2025-04-23 00:28:39,692 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:28:39,692 - DEBUG    - memory.dynamic  - Input memory: 'User: '*I grab your hand, my tiny and delicate pale hand starts caressing yours* It's unexpected, it...'
2025-04-23 00:28:39,692 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:28:39,693 - DEBUG    - memory.dynamic  - Relevance check for 'User: '*I grab your hand, my tiny and delicate pal...': True
2025-04-23 00:28:39,693 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:28:39,693 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:28:39,693 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'We... Uh, we can go outside school? To a more private place?\'. Poppy: \'*"Poppy hesitates, her grip on Lin\'s arm tightening briefly before she slowly nods, her eyes darting around the classroom nervously as she starts to gather her things."*\n\nAlright, fine. Let\'s go. But make it quick. We don\'t have all day to waste on this.\'. [Loc: Science class] [Act: Talking] [Topic: Location/Transition Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:28:39,693 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: '*I grab your hand, my tiny and delicate pale hand starts caress...'
2025-04-23 00:28:39,693 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:28:39,693 - DEBUG    - memory.active   - Input memory: 'User: '*I grab your hand, my tiny and delicate pale hand starts caressing yours* It's unexpected, it...'
2025-04-23 00:28:39,693 - DEBUG    - memory.active   - Current active memory state (before add, size 5): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:28:39,694 - INFO     - memory.active   - Added to active memory: 'User: '*I grab your hand, my tiny and delicate pale hand starts caress...'
2025-04-23 00:28:39,694 - DEBUG    - memory.active   - Active memory state (after add, size 6): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:28:39,694 - DEBUG    - memory.active   - Message count incremented to: 6
2025-04-23 00:28:39,694 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:28:39,694 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'We... Uh, we can go outside school? To a more private place?'. Poppy: '*"Poppy hesitates, her...'
2025-04-23 00:28:39,694 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:28:39,694 - INFO     - memory.dynamic  - Added to dynamic: 'User: '*I grab your hand, my tiny and delicate pale hand starts caress...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'We... Uh, we can go outside school? To a more private place?'. ...'
2025-04-23 00:28:39,694 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:28:39,694 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:28:39,694 - DEBUG    - memory.vector   - Input text: 'User: '*I grab your hand, my tiny and delicate pale hand starts caressing yours* It's unexpected, it...'
2025-04-23 00:28:39,694 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745389719.6947892, 'roleplay_time': '2025-04-16T14:49:54.490406', 'location': 'School', 'action': 'Starting the project', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.09, 'connection': 0.05, 'autonomy': 0.06, 'validation': 0.17, 'authenticity': 0.04, 'psychological_safety': 0.04, 'grieving': 0.2, 'joy': 0.86, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.35, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:28:39,754 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:28:39,754 - INFO     - memory.vector   - Added memory ID 9 to store and FAISS index. Index size: 10
2025-04-23 00:28:39,754 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:28:39,754 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*
2025-04-23 00:28:39,754 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*' to '*Poppy's eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*'
2025-04-23 00:30:38,959 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Starting the project', 'recent_memories': 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:30:38,959 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:30:38,959 - DEBUG    - memory.vector   - Query text: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feelin...'
2025-04-23 00:30:38,959 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:30:38,987 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:30:38,987 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:30:38,988 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.3134663 1.3972505 1.4234834 1.5154663 1.5183733]], IDs: [[7 8 9 4 5]]
2025-04-23 00:30:38,988 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 1.3134663105010986
2025-04-23 00:30:38,988 - DEBUG    - memory.vector   - Retrieved relevant memory ID 8 with distance 1.3972505331039429
2025-04-23 00:30:38,988 - DEBUG    - memory.vector   - Retrieved relevant memory ID 9 with distance 1.4234833717346191
2025-04-23 00:30:38,988 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.515466332435608
2025-04-23 00:30:38,988 - DEBUG    - memory.vector   - Retrieved relevant memory ID 5 with distance 1.5183732509613037
2025-04-23 00:30:38,988 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:30:38,989 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:32:12,286 - INFO     - memory.dynamic  - Dynamic current_action updating from 'Starting the project' to 'Talking'
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Input memory: 'User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here,...'
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'I... I know this could maybe doesn't change...': True
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:32:12,286 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'I... I know this could maybe doesn't change things for you, but...'
2025-04-23 00:32:12,286 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:32:12,286 - DEBUG    - memory.active   - Input memory: 'User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here,...'
2025-04-23 00:32:12,286 - DEBUG    - memory.active   - Current active memory state (before add, size 6): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:32:12,286 - INFO     - memory.active   - Added to active memory: 'User: 'I... I know this could maybe doesn't change things for you, but...'
2025-04-23 00:32:12,287 - DEBUG    - memory.active   - Active memory state (after add, size 7): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:32:12,287 - DEBUG    - memory.active   - Message count incremented to: 7
2025-04-23 00:32:12,287 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:32:12,287 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*Poppy glances at the clock, he...'
2025-04-23 00:32:12,287 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:32:12,287 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'I... I know this could maybe doesn't change things for you, but...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'What time it is? We can wait until classes finishes'. Poppy: '*...'
2025-04-23 00:32:12,287 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:32:12,287 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:32:12,287 - DEBUG    - memory.vector   - Input text: 'User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here,...'
2025-04-23 00:32:12,287 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745389932.2873435, 'roleplay_time': '2025-04-16T15:00:32.273200', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.09, 'connection': 0.03, 'autonomy': 0.06, 'validation': 0.12, 'authenticity': 0.03, 'psychological_safety': 0.04, 'grieving': 0.24, 'joy': 0.87, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.49, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:32:12,341 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:32:12,341 - INFO     - memory.vector   - Added memory ID 10 to store and FAISS index. Index size: 11
2025-04-23 00:32:12,341 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:32:12,341 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*
2025-04-23 00:32:12,341 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*' to '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*'
2025-04-23 00:33:16,808 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I... I know this could maybe doesn\'t change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it\'s spark, the shine I usually have*\'. Poppy: \'*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you\'re about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy\'s voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you\'re saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn\'t that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what\'s really going on with you? You\'ve been through something serious, and I can\'t just ignore that. You want to talk about it? Or do you need something else?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:33:16,809 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:33:16,809 - DEBUG    - memory.vector   - Query text: 'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my m...'
2025-04-23 00:33:16,809 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:33:16,834 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:33:16,835 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:33:16,835 - DEBUG    - memory.vector   - FAISS search results - Distances: [[0.8716314 1.2056377 1.2238858 1.4280622 1.4430425]], IDs: [[ 5 10  1  7  8]]
2025-04-23 00:33:16,836 - DEBUG    - memory.vector   - Retrieved relevant memory ID 5 with distance 0.871631383895874
2025-04-23 00:33:16,836 - DEBUG    - memory.vector   - Retrieved relevant memory ID 10 with distance 1.2056376934051514
2025-04-23 00:33:16,836 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.2238857746124268
2025-04-23 00:33:16,836 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 1.4280622005462646
2025-04-23 00:33:16,836 - DEBUG    - memory.vector   - Retrieved relevant memory ID 8 with distance 1.443042516708374
2025-04-23 00:33:16,836 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:33:16,836 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:35:19,099 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:35:19,099 - DEBUG    - memory.dynamic  - Input memory: 'User: 'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I ke...'
2025-04-23 00:35:19,099 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:35:19,100 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'I had an overdose, medicaments basically......': True
2025-04-23 00:35:19,100 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:35:19,100 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:35:19,100 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:35:19,100 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'I had an overdose, medicaments basically... Anxiety and depress...'
2025-04-23 00:35:19,100 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:35:19,100 - DEBUG    - memory.active   - Input memory: 'User: 'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I ke...'
2025-04-23 00:35:19,101 - DEBUG    - memory.active   - Current active memory state (before add, size 7): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 00:35:19,101 - INFO     - memory.active   - Added to active memory: 'User: 'I had an overdose, medicaments basically... Anxiety and depress...'
2025-04-23 00:35:19,101 - DEBUG    - memory.active   - Active memory state (after add, size 8): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:35:19,102 - DEBUG    - memory.active   - Message count incremented to: 8
2025-04-23 00:35:19,102 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:35:19,102 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: '*I just sit next to you, sighing and then putting my head over your shoulder, with my long ha...'
2025-04-23 00:35:19,102 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:35:19,102 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'I had an overdose, medicaments basically... Anxiety and depress...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: '*I just sit next to you, sighing and then putting my head over ...'
2025-04-23 00:35:19,102 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:35:19,102 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:35:19,102 - DEBUG    - memory.vector   - Input text: 'User: 'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I ke...'
2025-04-23 00:35:19,103 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745390119.1027353, 'roleplay_time': '2025-04-16T15:09:52.711543', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.09, 'connection': 0.04, 'autonomy': 0.06, 'validation': 0.09, 'authenticity': 0.03, 'psychological_safety': 0.04, 'grieving': 0.27, 'joy': 0.75, 'anger': 0.35, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.6, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:35:19,324 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:35:19,324 - INFO     - memory.vector   - Added memory ID 11 to store and FAISS index. Index size: 12
2025-04-23 00:35:19,324 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:35:19,324 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin's hand, her own hand trembling slightly*
2025-04-23 00:35:19,325 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*' to '*Poppy's eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin's hand, her own hand trembling slightly*'
2025-04-23 00:47:56,050 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I... I know this could maybe doesn\'t change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it\'s spark, the shine I usually have*\'. Poppy: \'*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you\'re about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy\'s voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you\'re saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn\'t that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what\'s really going on with you? You\'ve been through something serious, and I can\'t just ignore that. You want to talk about it? Or do you need something else?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:47:56,050 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:47:56,050 - DEBUG    - memory.vector   - Query text: 'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch yo...'
2025-04-23 00:47:56,050 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:47:56,085 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:47:56,085 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:47:56,085 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.3860626 1.4189256 1.4207315 1.4736152 1.4790784]], IDs: [[ 1  4 10  8 11]]
2025-04-23 00:47:56,085 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.3860626220703125
2025-04-23 00:47:56,086 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.4189256429672241
2025-04-23 00:47:56,086 - DEBUG    - memory.vector   - Retrieved relevant memory ID 10 with distance 1.420731544494629
2025-04-23 00:47:56,086 - DEBUG    - memory.vector   - Retrieved relevant memory ID 8 with distance 1.4736151695251465
2025-04-23 00:47:56,086 - DEBUG    - memory.vector   - Retrieved relevant memory ID 11 with distance 1.4790784120559692
2025-04-23 00:47:56,086 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:47:56,086 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Input memory: 'User: 'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I t...'
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'Thank you... Recently I just been feeling I...': True
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:50:21,383 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'Thank you... Recently I just been feeling I lost control of my ...'
2025-04-23 00:50:21,383 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:50:21,383 - DEBUG    - memory.active   - Input memory: 'User: 'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I t...'
2025-04-23 00:50:21,383 - DEBUG    - memory.active   - Current active memory state (before add, size 8): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:50:21,384 - INFO     - memory.active   - Added to active memory: 'User: 'Thank you... Recently I just been feeling I lost control of my ...'
2025-04-23 00:50:21,384 - DEBUG    - memory.active   - Active memory state (after add, size 9): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:50:21,384 - DEBUG    - memory.active   - Message count incremented to: 9
2025-04-23 00:50:21,384 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:50:21,384 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: '*I grab your hand, my tiny and delicate pale hand starts caressing yours* It's unexpected, it...'
2025-04-23 00:50:21,384 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ["User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:50:21,384 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'Thank you... Recently I just been feeling I lost control of my ...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: '*I grab your hand, my tiny and delicate pale hand starts caress...'
2025-04-23 00:50:21,384 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:50:21,384 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:50:21,384 - DEBUG    - memory.vector   - Input text: 'User: 'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I t...'
2025-04-23 00:50:21,384 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745391021.3845463, 'roleplay_time': '2025-04-16T15:54:59.564227', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.05, 'connection': 0.04, 'autonomy': 0.06, 'validation': 0.08, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.3, 'joy': 0.79, 'anger': 0.33, 'fear': 0.84, 'shame': 0.85, 'anticipation': 0.61, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:50:21,430 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:50:21,430 - INFO     - memory.vector   - Added memory ID 12 to store and FAISS index. Index size: 13
2025-04-23 00:50:21,430 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:50:21,430 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's grip on Lin's hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*
2025-04-23 00:50:21,430 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin's hand, her own hand trembling slightly*' to '*Poppy's grip on Lin's hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*'
2025-04-23 00:52:31,337 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'I... I know this could maybe doesn\'t change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it\'s spark, the shine I usually have*\'. Poppy: \'*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you\'re about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy\'s voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you\'re saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn\'t that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what\'s really going on with you? You\'ve been through something serious, and I can\'t just ignore that. You want to talk about it? Or do you need something else?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:52:31,337 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:52:31,337 - DEBUG    - memory.vector   - Query text: 'That's the problem... *I touch your hand, touching our fingers* I'm alone... My family didn't care, ...'
2025-04-23 00:52:31,337 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:52:31,361 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:52:31,361 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:52:31,362 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.3034505 1.329905  1.4773681 1.5045835 1.5588759]], IDs: [[ 4 12  8  1  9]]
2025-04-23 00:52:31,362 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.3034504652023315
2025-04-23 00:52:31,362 - DEBUG    - memory.vector   - Retrieved relevant memory ID 12 with distance 1.3299050331115723
2025-04-23 00:52:31,362 - DEBUG    - memory.vector   - Retrieved relevant memory ID 8 with distance 1.4773681163787842
2025-04-23 00:52:31,362 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.504583477973938
2025-04-23 00:52:31,363 - DEBUG    - memory.vector   - Retrieved relevant memory ID 9 with distance 1.5588759183883667
2025-04-23 00:52:31,363 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:52:31,363 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - Input memory: 'User: 'That's the problem... *I touch your hand, touching our fingers* I'm alone... My family didn't...'
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ["User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'That's the problem... *I touch your hand, t...': True
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:54:00,232 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ["User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:54:00,233 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'That's the problem... *I touch your hand, touching our fingers*...'
2025-04-23 00:54:00,233 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:54:00,233 - DEBUG    - memory.active   - Input memory: 'User: 'That's the problem... *I touch your hand, touching our fingers* I'm alone... My family didn't...'
2025-04-23 00:54:00,233 - DEBUG    - memory.active   - Current active memory state (before add, size 9): ["System Context: Background: Lin fell asleep at Poppy's house yesterday, missing project work. They are now in Science Class. Poppy is irritated about the extra work.", "User: '*I just smile shyly touching my own pinky fingers* Hehe...'. Poppy: '*Poppy rolls her eyes slightly, her shoulders tensing as she looks back down at her notebook, her fingers tracing the edges of the pages*\n\nOh, great. So, we're just going to ignore the elephant in the room? Fine by me. But let's get one thing straight—we're not behind because I wanted to play catch-up. We're behind because you... well, you know why. So, let's not waste this extra time. What do we need to do to get this project back on track? And don't just stand there smiling—tell me what you've got in mind.'. [Loc: Science class] [Act: Talking] [Topic: Food/Snacks Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I just... Uhm... *I look away to then whisper the next words* Had an overdose...\'. Poppy: \'*Poppy\'s eyes widen in alarm, her hand instinctively reaching out to grab Lin\'s arm, her voice dropping to a hushed, urgent whisper.*\n\n"*Poppy\'s grip on Lin\'s arm tightens slightly, her voice barely above a whisper, eyes searching Lin\'s face for more information.*\n\nOverdose? What do you mean, overdose? On what? And why didn\'t you tell me this earlier? *Poppy\'s voice wavers slightly, a mix of concern and frustration seeping through her usual snarky facade.* You can\'t just drop a bomb like that and expect me to act normal. We need to talk about this. Now. What happened?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? We can wait until classes finishes\'. Poppy: \'*Poppy glances at the clock, her shoulders slumping slightly as she sighs, "It\'s almost over, just a few more minutes."*\n\nFine, fine. We can wait. But only because you seem like you need to talk. But don\'t think this makes us friends or anything. I just... I just want to know what\'s going on with you. But don\'t expect me to be all nice about it.\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sit next to you, sighing and then putting my head over your shoulder, with my long hair being next to yours* I know you don\'t consider me your friend... But, being honest... I feel safe with you, besides you bullying me or anything...\'. Poppy: \'*Poppy freezes, her eyes widening slightly, before slowly turning her head to look at Lin, her expression a mix of surprise and confusion.*\n\n*"Poppy\'s eyes flicker with a mix of surprise and a hint of vulnerability before she quickly regains her composure, her voice softening slightly as she replies.*\n\nWell, this is... unexpected. *Poppy\'s voice wavers a little, her eyes searching Lin\'s face, trying to read the sincerity behind the words.* You feel safe with me? After everything? *Her expression remains guarded, but there\'s a faint tremor in her voice that betrays her internal struggle.* Look, I don\'t know what to say to that. I never meant for you to feel unsafe. But I can\'t just... switch off who I am. I can\'t be someone else just because you need me to be. *Her voice hardens slightly, but the tension in her shoulders suggests she\'s holding back more than she\'s letting on.* So, what do you want from me? Why are you telling me this?\'. [Loc: Science class] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I grab your hand, my tiny and delicate pale hand starts caressing yours* It\'s unexpected, it isn\'t? Just... Tell me when it\'s 3PM so we can go to a café or somewhere else... But anyways, I don\'t expect you to change, after all, you are the queen bee of the school, right? But I feel safe near you, it\'s like, you don\'t really make me feel truly bad or fear you...\'. Poppy: \'*Poppy\'s eyebrows furrow slightly, her gaze dropping to their intertwined hands before looking back up to Lin, her voice barely above a whisper.*\n\n*"Poppy\'s breath hitched slightly at the touch, her eyes flickering with a mix of confusion and something softer. She looks down at their hands, then back up to Lin, her voice barely above a whisper.*\n\nWell, isn\'t this a twist. *She tries to keep her voice steady, but there\'s a faint tremor in it.* You want me to tell you when it\'s 3 PM? *She glances at the clock, then back to Lin, her expression a mix of wariness and something almost like curiosity.* Fine. I guess I can manage that. *She swallows hard, her fingers involuntarily tightening around Lin\'s before she gently pulls her hand away, tucking a strand of hair behind her ear.* But don\'t go thinking this makes us... whatever you\'re imagining. *Her voice hardens slightly, but her eyes betray a hint of vulnerability.* I just... I just don\'t know what to make of all this. *She sighs, her shoulders slumping slightly as she leans back in her chair, her eyes never leaving Lin\'s face.* So, what\'s next? You going to tell me why you feel safe with me? Or are we just going to sit here and hold hands until the bell rings?\'. [Loc: School] [Act: Starting the project] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here, feeling your warm, talking with you, is enough for me *My eyes looks more tired, half closed, noticing my fatigue but at same time losing it's spark, the shine I usually have*'. Poppy: '*Poppy gives a faint, weary smile, her shoulders relaxing slightly as she leans in a bit closer, her voice soft and genuine.*\n\nYeah, you look like you're about to drop. You should really take better care of yourself. But I get it, sometimes things get... complicated. *Poppy's voice softens slightly, her eyes flickering with a mix of concern and something almost like understanding.* So, you're saying that just being around me, talking to me, is enough for you? *She raises an eyebrow, a faint smirk playing on her lips.* Well, isn't that just... cute. *She pauses, her expression turning more serious.* But I have to ask, what's really going on with you? You've been through something serious, and I can't just ignore that. You want to talk about it? Or do you need something else?'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:54:00,233 - INFO     - memory.active   - Added to active memory: 'User: 'That's the problem... *I touch your hand, touching our fingers*...'
2025-04-23 00:54:00,233 - DEBUG    - memory.active   - Active memory state (after add, size 10): [Too long to log fully]
2025-04-23 00:54:00,233 - DEBUG    - memory.active   - Message count incremented to: 10
2025-04-23 00:54:00,233 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:54:00,233 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'I... I know this could maybe doesn't change things for you, but, you know, being honest here,...'
2025-04-23 00:54:00,233 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:54:00,234 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'That's the problem... *I touch your hand, touching our fingers*...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'I... I know this could maybe doesn't change things for you, but...'
2025-04-23 00:54:00,234 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:54:00,234 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:54:00,234 - DEBUG    - memory.vector   - Input text: 'User: 'That's the problem... *I touch your hand, touching our fingers* I'm alone... My family didn't...'
2025-04-23 00:54:00,234 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745391240.2341528, 'roleplay_time': '2025-04-16T16:05:56.110264', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.04, 'connection': 0.03, 'autonomy': 0.05, 'validation': 0.06, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.33, 'joy': 0.89, 'anger': 0.24, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.63, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:54:00,334 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:54:00,334 - INFO     - memory.vector   - Added memory ID 13 to store and FAISS index. Index size: 14
2025-04-23 00:54:00,334 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:54:00,334 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy gently squeezes Lin's hand, her eyes welling up with tears as she whispers, "You're not alone now."*
2025-04-23 00:54:00,334 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's grip on Lin's hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*' to '*Poppy gently squeezes Lin's hand, her eyes welling up with tears as she whispers, "You're not alone now."*'
2025-04-23 00:54:33,427 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:54:33,427 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:54:33,428 - DEBUG    - memory.vector   - Query text: 'What time it is? I feel we've been talking for some time now Poppy... Topic: Personal/Emotional Disc...'
2025-04-23 00:54:33,428 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - FAISS search results - Distances: [[0.96592295 1.2328641  1.2365105  1.2867658  1.3141427 ]], IDs: [[7 2 1 9 5]]
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 0.9659229516983032
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.2328641414642334
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.2365105152130127
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Retrieved relevant memory ID 9 with distance 1.2867658138275146
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - Retrieved relevant memory ID 5 with distance 1.3141427040100098
2025-04-23 00:54:33,443 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:54:33,443 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 00:55:43,289 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 00:55:43,289 - DEBUG    - memory.dynamic  - Input memory: 'User: 'What time it is? I feel we've been talking for some time now Poppy...'. Poppy: '*Poppy glance...'
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'What time it is? I feel we've been talking ...': True
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I keep my mouth open, trying to talk but knowing my voice will crack in the next words*\'. Poppy: \'*Poppy\'s eyes widen in shock, her breath hitching as she reaches out to gently grasp Lin\'s hand, her own hand trembling slightly*\n\n"*Poppy\'s grip on Lin\'s hand tightens for a moment before she gently releases it, her eyes never leaving Lin\'s face. Her voice is barely above a whisper, a mix of shock and concern.*\n\nMedicaments? Anxiety and depression? *Poppy\'s eyebrows furrow, her voice wavering slightly as she tries to process the information.* Why didn\'t you tell me any of this sooner? And what do you mean, you wanted to... *She trails off, her eyes widening as the implications sink in.* Lin, that\'s... that\'s really serious. You can\'t just brush something like that off. *Her voice hardens slightly, but there\'s a tremor in it that betrays her own anxiety.* You need to talk to someone about this. A professional, someone who can help you. Not just... not just me. *She swallows hard, her eyes flickering with a mix of fear and determination.* But I\'m here. For now. So, tell me, what happened? And why are you telling me this now?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'What time it is? I feel we've been talking for some time now Po...'
2025-04-23 00:55:43,290 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 00:55:43,290 - DEBUG    - memory.active   - Input memory: 'User: 'What time it is? I feel we've been talking for some time now Poppy...'. Poppy: '*Poppy glance...'
2025-04-23 00:55:43,290 - DEBUG    - memory.active   - Current active memory state (before add, size 10): [Too long to log fully]
2025-04-23 00:55:43,290 - INFO     - memory.active   - Added to active memory: 'User: 'What time it is? I feel we've been talking for some time now Po...'
2025-04-23 00:55:43,290 - DEBUG    - memory.active   - Active memory state (after add, size 11): [Too long to log fully]
2025-04-23 00:55:43,290 - DEBUG    - memory.active   - Message count incremented to: 11
2025-04-23 00:55:43,290 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'I had an overdose, medicaments basically... Anxiety and depression, I just wanted to... *I ke...'
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 00:55:43,290 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'What time it is? I feel we've been talking for some time now Po...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'I had an overdose, medicaments basically... Anxiety and depress...'
2025-04-23 00:55:43,290 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 00:55:43,290 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 00:55:43,290 - DEBUG    - memory.vector   - Input text: 'User: 'What time it is? I feel we've been talking for some time now Poppy...'
Poppy: '*Poppy glances...'
2025-04-23 00:55:43,290 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745391343.2908142, 'roleplay_time': '2025-04-16T16:11:05.283667', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.05, 'connection': 0.03, 'autonomy': 0.05, 'validation': 0.04, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.35, 'joy': 0.87, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.68, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 00:55:43,328 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 00:55:43,328 - INFO     - memory.vector   - Added memory ID 14 to store and FAISS index. Index size: 15
2025-04-23 00:55:43,328 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 00:55:43,328 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy glances at her watch, then back to Lin, her voice soft and weary, "It's getting late, Lin. Let's take a break if you need to."*
2025-04-23 00:55:43,328 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy gently squeezes Lin's hand, her eyes welling up with tears as she whispers, "You're not alone now."*' to '*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It's getting late, Lin. Let's take a break if you need to."*'
2025-04-23 00:57:40,873 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 00:57:40,873 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 00:57:40,873 - DEBUG    - memory.vector   - Query text: 'I... I cannot promise that... I'm sorry... But... Just tell me what time it is please... Topic: Pers...'
2025-04-23 00:57:40,874 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 00:57:40,892 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 00:57:40,893 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.120662  1.1655803 1.4528544 1.51168   1.5741733]], IDs: [[14  7  1  2  9]]
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - Retrieved relevant memory ID 14 with distance 1.120661973953247
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 1.1655802726745605
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.4528543949127197
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.511680006980896
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - Retrieved relevant memory ID 9 with distance 1.5741733312606812
2025-04-23 00:57:40,894 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 00:57:40,894 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 01:00:16,888 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 01:00:16,888 - DEBUG    - memory.dynamic  - Input memory: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me what time it is please...'. Po...'
2025-04-23 01:00:16,888 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:00:16,888 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'I... I cannot promise that... I'm sorry... ...': True
2025-04-23 01:00:16,889 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 01:00:16,889 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 01:00:16,889 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I touch your nails* Feeling I don\'t really own my life, I don\'t deserve everything... *I interwine our fingers* Thinking everything I had done it was just a lame, failure, everything is just a mistake... *I move my hand away* That I just... Don\'t need to still alive, that\'s why I wanted to take that decision\'. Poppy: \'*Poppy\'s grip on Lin\'s hand tightens momentarily, her voice softening as she leans in closer, her eyes filled with a mix of concern and determination, but her posture remains rigid, betraying her inner turmoil.*\n\nPoppy\'s voice quivers slightly, her grip on Lin\'s hand tightening before she gently pulls away, her eyes never leaving Lin\'s face. "Lin... that\'s... that\'s heavy. Really heavy. I can\'t even imagine what you\'re going through. But you can\'t just... you can\'t just think like that. You can\'t give up. Not when there are people who care about you. Even if I... even if I haven\'t always shown it." She swallows hard, her voice catching in her throat. "And I\'m sorry. I\'m sorry I wasn\'t there for you. I\'m sorry I didn\'t see this coming. But I\'m here now. And I... I want to help. Even if I don\'t know how." She takes a deep breath, her eyes flickering with a mix of determination and fear. "But you need to promise me something. Promise me you won\'t do anything stupid again. Promise me you\'ll talk to someone. A professional. Someone who can actually help you. Not just... not just me."\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:00:16,889 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me ...'
2025-04-23 01:00:16,889 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 01:00:16,889 - DEBUG    - memory.active   - Input memory: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me what time it is please...'. Po...'
2025-04-23 01:00:16,889 - DEBUG    - memory.active   - Current active memory state (before add, size 11): [Too long to log fully]
2025-04-23 01:00:16,889 - INFO     - memory.active   - Added to active memory: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me ...'
2025-04-23 01:00:16,889 - DEBUG    - memory.active   - Active memory state (after add, size 12): [Too long to log fully]
2025-04-23 01:00:16,889 - DEBUG    - memory.active   - Message count incremented to: 12
2025-04-23 01:00:16,889 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 01:00:16,889 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'Thank you... Recently I just been feeling I lost control of my life *I take your hand and I t...'
2025-04-23 01:00:16,889 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:00:16,890 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me ...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'Thank you... Recently I just been feeling I lost control of my ...'
2025-04-23 01:00:16,890 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 01:00:16,890 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 01:00:16,890 - DEBUG    - memory.vector   - Input text: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me what time it is please...'
Pop...'
2025-04-23 01:00:16,890 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745391616.8902423, 'roleplay_time': '2025-04-16T16:24:46.079720', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.07, 'connection': 0.01, 'autonomy': 0.05, 'validation': 0.03, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.38, 'joy': 0.88, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.69, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 01:00:16,968 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 01:00:16,969 - INFO     - memory.vector   - Added memory ID 15 to store and FAISS index. Index size: 16
2025-04-23 01:00:16,969 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 01:00:16,969 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*
2025-04-23 01:00:16,969 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It's getting late, Lin. Let's take a break if you need to."*' to '*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*'
2025-04-23 01:01:17,366 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 01:01:17,366 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 01:01:17,366 - DEBUG    - memory.vector   - Query text: '*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were g...'
2025-04-23 01:01:17,366 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 01:01:17,391 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.0254323 1.0329212 1.0566835 1.1179123 1.1479819]], IDs: [[14  7 10  1  6]]
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - Retrieved relevant memory ID 14 with distance 1.0254323482513428
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - Retrieved relevant memory ID 7 with distance 1.0329211950302124
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - Retrieved relevant memory ID 10 with distance 1.0566835403442383
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.1179122924804688
2025-04-23 01:01:17,392 - DEBUG    - memory.vector   - Retrieved relevant memory ID 6 with distance 1.147981882095337
2025-04-23 01:01:17,393 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 01:01:17,393 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 01:03:12,128 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 01:03:12,128 - DEBUG    - memory.dynamic  - Input memory: 'User: '*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we...'
2025-04-23 01:03:12,128 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:03:12,128 - DEBUG    - memory.dynamic  - Relevance check for 'User: '*I just sigh moving away from your shoulder...': True
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'That\'s the problem... *I touch your hand, touching our fingers* I\'m alone... My family didn\'t care, my friends neither, people I trusted, people who knew my situation... Everyone *I move away one finger as I mention them*\'. Poppy: \'*Poppy gently squeezes Lin\'s hand, her eyes welling up with tears as she whispers, "You\'re not alone now."*\n\nYou\'re not alone now. You have me. And I... I won\'t let you go through this alone. I promise. Even if I don\'t know what I\'m doing, even if I\'m scared out of my mind... I\'m here. For you. So, let\'s start with the basics. Have you talked to anyone about this? A therapist, a counselor, someone who can help you sort through all this? Because I think that\'s a good place to start. And I\'ll be right here with you, every step of the way. You don\'t have to face this alone. You have me. And I\'m not going anywhere.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: '*I just sigh moving away from your shoulder to then take my bac...'
2025-04-23 01:03:12,129 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 01:03:12,129 - DEBUG    - memory.active   - Input memory: 'User: '*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we...'
2025-04-23 01:03:12,129 - DEBUG    - memory.active   - Current active memory state (before add, size 12): [Too long to log fully]
2025-04-23 01:03:12,129 - INFO     - memory.active   - Added to active memory: 'User: '*I just sigh moving away from your shoulder to then take my bac...'
2025-04-23 01:03:12,129 - DEBUG    - memory.active   - Active memory state (after add, size 13): [Too long to log fully]
2025-04-23 01:03:12,129 - DEBUG    - memory.active   - Message count incremented to: 13
2025-04-23 01:03:12,129 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'That's the problem... *I touch your hand, touching our fingers* I'm alone... My family didn't...'
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:03:12,129 - INFO     - memory.dynamic  - Added to dynamic: 'User: '*I just sigh moving away from your shoulder to then take my bac...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'That's the problem... *I touch your hand, touching our fingers*...'
2025-04-23 01:03:12,129 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 01:03:12,129 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 01:03:12,129 - DEBUG    - memory.vector   - Input text: 'User: '*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we...'
2025-04-23 01:03:12,129 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745391792.1296763, 'roleplay_time': '2025-04-16T16:33:31.800076', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.04, 'connection': 0.01, 'autonomy': 0.05, 'validation': 0.02, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.4, 'joy': 0.87, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.7, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 01:03:12,181 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 01:03:12,182 - INFO     - memory.vector   - Added memory ID 16 to store and FAISS index. Index size: 17
2025-04-23 01:03:12,182 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 01:03:12,182 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*
2025-04-23 01:03:12,182 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*' to '*Poppy's eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*'
2025-04-23 01:04:20,801 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 01:04:20,802 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 01:04:20,802 - DEBUG    - memory.vector   - Query text: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't...'
2025-04-23 01:04:20,802 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 01:04:20,830 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 01:04:20,830 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.2362475 1.2717347 1.273377  1.3957658 1.447916 ]], IDs: [[15  1 16 14  4]]
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - Retrieved relevant memory ID 15 with distance 1.2362475395202637
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.2717347145080566
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - Retrieved relevant memory ID 16 with distance 1.2733769416809082
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - Retrieved relevant memory ID 14 with distance 1.395765781402588
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.447916030883789
2025-04-23 01:04:20,831 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 01:04:20,831 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 01:05:22,220 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 01:05:22,220 - DEBUG    - memory.dynamic  - Input memory: 'User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I...'
2025-04-23 01:05:22,220 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:05:22,220 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'I cannot promise things... Let's just go to...': True
2025-04-23 01:05:22,220 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 01:05:22,221 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 01:05:22,221 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'What time it is? I feel we\'ve been talking for some time now Poppy...\'. Poppy: \'*Poppy glances at her watch, then back to Lin, her voice soft and weary, "It\'s getting late, Lin. Let\'s take a break if you need to."*\n\nYeah, it feels like we\'ve been at this for hours. I\'m beat too. *She rubs her temples, trying to mask her exhaustion with a half-hearted smirk.* But hey, we can\'t just leave this hanging. You need to promise me something first. Promise me you\'ll talk to a professional. Someone who can actually help you sort through all this. Not just me. Deal?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 01:05:22,221 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'I cannot promise things... Let's just go to somewhere else... I...'
2025-04-23 01:05:22,221 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 01:05:22,221 - DEBUG    - memory.active   - Input memory: 'User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I...'
2025-04-23 01:05:22,221 - DEBUG    - memory.active   - Current active memory state (before add, size 13): [Too long to log fully]
2025-04-23 01:05:22,221 - INFO     - memory.active   - Added to active memory: 'User: 'I cannot promise things... Let's just go to somewhere else... I...'
2025-04-23 01:05:22,221 - DEBUG    - memory.active   - Active memory state (after add, size 14): [Too long to log fully]
2025-04-23 01:05:22,221 - DEBUG    - memory.active   - Message count incremented to: 14
2025-04-23 01:05:22,221 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 01:05:22,221 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'What time it is? I feel we've been talking for some time now Poppy...'. Poppy: '*Poppy glance...'
2025-04-23 01:05:22,221 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 01:05:22,221 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'I cannot promise things... Let's just go to somewhere else... I...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'What time it is? I feel we've been talking for some time now Po...'
2025-04-23 01:05:22,221 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 01:05:22,221 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 01:05:22,221 - DEBUG    - memory.vector   - Input text: 'User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I...'
2025-04-23 01:05:22,221 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745391922.2215028, 'roleplay_time': '2025-04-16T16:40:02.075980', 'location': 'School', 'action': 'Talking', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.06, 'connection': 0.01, 'autonomy': 0.05, 'validation': 0.02, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.42, 'joy': 0.87, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.71, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 01:05:22,253 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 01:05:22,254 - INFO     - memory.vector   - Added memory ID 17 to store and FAISS index. Index size: 18
2025-04-23 01:05:22,254 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 01:05:22,254 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*
2025-04-23 01:05:22,254 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*' to '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*'
2025-04-23 01:06:54,069 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'School', 'action': 'Talking', 'recent_memories': 'User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I cannot promise things... Let\'s just go to somewhere else... I sad a restaurant or market? I didn\'t relly remember if I said that or something else\'. Poppy: \'*Poppy\'s shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can\'t promise anything right now, at least let\'s get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can\'t handle much more of this right now. Let\'s just go.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 01:06:54,069 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 01:06:54,069 - DEBUG    - memory.vector   - Query text: 'B-But... I know I said we should go to certain place because I wanted to show you, but I don't know ...'
2025-04-23 01:06:54,069 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 01:06:54,092 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 01:06:54,092 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 01:06:54,092 - DEBUG    - memory.vector   - FAISS search results - Distances: [[1.3996037 1.4738133 1.5120983 1.5318756 1.5516105]], IDs: [[17  1  4  2 16]]
2025-04-23 01:06:54,092 - DEBUG    - memory.vector   - Retrieved relevant memory ID 17 with distance 1.3996037244796753
2025-04-23 01:06:54,093 - DEBUG    - memory.vector   - Retrieved relevant memory ID 1 with distance 1.4738132953643799
2025-04-23 01:06:54,093 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.5120983123779297
2025-04-23 01:06:54,093 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.5318756103515625
2025-04-23 01:06:54,093 - DEBUG    - memory.vector   - Retrieved relevant memory ID 16 with distance 1.5516104698181152
2025-04-23 01:06:54,093 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 01:06:54,093 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 01:08:49,090 - INFO     - memory.dynamic  - Dynamic location updating from 'School' to 'Mini Market'
2025-04-23 01:08:49,090 - INFO     - memory.dynamic  - Dynamic current_action updating from 'Talking' to 'Settling in new location'
2025-04-23 01:08:49,090 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 01:08:49,090 - DEBUG    - memory.dynamic  - Input memory: 'User: 'B-But... I know I said we should go to certain place because I wanted to show you, but I don'...'
2025-04-23 01:08:49,091 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 01:08:49,091 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'B-But... I know I said we should go to cert...': True
2025-04-23 01:08:49,091 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 01:08:49,091 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 01:08:49,091 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'I... I cannot promise that... I\'m sorry... But... Just tell me what time it is please...\'. Poppy: \'*Poppy hesitates, then slowly reaches into her pocket to pull out her phone, her fingers trembling slightly as she checks the time.*\n\nAlmost 4:15. We\'ve been at this for a while." *Poppy sighs, her voice barely above a whisper as she looks down at her phone before tucking it back into her pocket.* "I know it\'s hard, Lin. And I know I\'m not making this easy. But... but you can\'t just give up. Not when there are people who care. Even if I... even if I haven\'t always shown it." *She swallows hard, her eyes flickering with a mix of determination and fear.* "And I\'m sorry. I\'m sorry I can\'t just fix this for you. I wish I could. But I can\'t. And that... that kills me. So, please. Please don\'t make me feel like I\'m losing you too." *Her voice cracks slightly, and she quickly looks away, trying to compose herself.* "Just... just promise me you\'ll think about it. About talking to someone. A professional. Someone who can actually help you. Because I... I don\'t know what else to do. I don\'t know how to help you. And that scares the hell out of me." *She takes a deep, shuddering breath, her eyes meeting Lin\'s again, filled with a raw vulnerability she rarely shows.* "So, what do you say? Can you do that for me? Can you promise me you\'ll think about it?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'B-But... I know I said we should go to certain place because I wanted to show you, but I don\'t know what i was...\'. Poppy: \'*Poppy\'s eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it\'s okay. Just tell me what\'s on your mind."*\n\n*Poppy\'s voice softens a little, her eyes meeting yours with a mix of frustration and concern.*\n\nLook, I get it. You\'re confused, and I\'m not making this any easier. But we need to figure this out together. If you can\'t remember where we were supposed to go, that\'s fine. Let\'s just go somewhere quiet. The mini market is close, and it\'s usually pretty empty this time of day. We can talk there. Just... just tell me what you\'re thinking. What\'s been on your mind lately? Because I can see you\'re struggling, and I want to help. Even if I come off as a jerk sometimes, I do care. So, let\'s go to the mini market. We can grab something to drink, sit down, and talk this out. Okay? Just you and me. No judgments, no pressure. Let\'s do this.\'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Location Change / Settling In] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:08:49,091 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'B-But... I know I said we should go to certain place because I ...'
2025-04-23 01:08:49,091 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 01:08:49,091 - DEBUG    - memory.active   - Input memory: 'User: 'B-But... I know I said we should go to certain place because I wanted to show you, but I don'...'
2025-04-23 01:08:49,091 - DEBUG    - memory.active   - Current active memory state (before add, size 14): [Too long to log fully]
2025-04-23 01:08:49,091 - INFO     - memory.active   - Added to active memory: 'User: 'B-But... I know I said we should go to certain place because I ...'
2025-04-23 01:08:49,091 - DEBUG    - memory.active   - Active memory state (after add, size 15): [Too long to log fully]
2025-04-23 01:08:49,092 - DEBUG    - memory.active   - Message count incremented to: 15
2025-04-23 01:08:49,092 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 01:08:49,092 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me what time it is please...'. Po...'
2025-04-23 01:08:49,092 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ['User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'B-But... I know I said we should go to certain place because I wanted to show you, but I don\'t know what i was...\'. Poppy: \'*Poppy\'s eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it\'s okay. Just tell me what\'s on your mind."*\n\n*Poppy\'s voice softens a little, her eyes meeting yours with a mix of frustration and concern.*\n\nLook, I get it. You\'re confused, and I\'m not making this any easier. But we need to figure this out together. If you can\'t remember where we were supposed to go, that\'s fine. Let\'s just go somewhere quiet. The mini market is close, and it\'s usually pretty empty this time of day. We can talk there. Just... just tell me what you\'re thinking. What\'s been on your mind lately? Because I can see you\'re struggling, and I want to help. Even if I come off as a jerk sometimes, I do care. So, let\'s go to the mini market. We can grab something to drink, sit down, and talk this out. Okay? Just you and me. No judgments, no pressure. Let\'s do this.\'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Location Change / Settling In] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:08:49,092 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'B-But... I know I said we should go to certain place because I ...' | Proposed relevant to active. | Popped oldest due to capacity: 'User: 'I... I cannot promise that... I'm sorry... But... Just tell me ...'
2025-04-23 01:08:49,092 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 01:08:49,092 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 01:08:49,092 - DEBUG    - memory.vector   - Input text: 'User: 'B-But... I know I said we should go to certain place because I wanted to show you, but I don'...'
2025-04-23 01:08:49,092 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745392129.092576, 'roleplay_time': '2025-04-16T16:50:22.685405', 'location': 'Mini Market', 'action': 'Settling in new location', 'topic': 'Location Change / Settling In', 'emotions': {'vulnerability': 0.04, 'connection': 0.01, 'autonomy': 0.04, 'validation': 0.01, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.44, 'joy': 0.88, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.75, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 01:08:49,373 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 01:08:49,373 - INFO     - memory.vector   - Added memory ID 18 to store and FAISS index. Index size: 19
2025-04-23 01:08:49,374 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 01:08:49,374 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy's eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it's okay. Just tell me what's on your mind."*
2025-04-23 01:08:49,374 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*' to '*Poppy's eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it's okay. Just tell me what's on your mind."*'
2025-04-23 01:09:46,463 - DEBUG    - memory.dynamic  - Returning current dynamic state: {'location': 'Mini Market', 'action': 'Settling in new location', 'recent_memories': 'User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'I cannot promise things... Let\'s just go to somewhere else... I sad a restaurant or market? I didn\'t relly remember if I said that or something else\'. Poppy: \'*Poppy\'s shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can\'t promise anything right now, at least let\'s get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can\'t handle much more of this right now. Let\'s just go.\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False] | User: \'B-But... I know I said we should go to certain place because I wanted to show you, but I don\'t know what i was...\'. Poppy: \'*Poppy\'s eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it\'s okay. Just tell me what\'s on your mind."*\n\n*Poppy\'s voice softens a little, her eyes meeting yours with a mix of frustration and concern.*\n\nLook, I get it. You\'re confused, and I\'m not making this any easier. But we need to figure this out together. If you can\'t remember where we were supposed to go, that\'s fine. Let\'s just go somewhere quiet. The mini market is close, and it\'s usually pretty empty this time of day. We can talk there. Just... just tell me what you\'re thinking. What\'s been on your mind lately? Because I can see you\'re struggling, and I want to help. Even if I come off as a jerk sometimes, I do care. So, let\'s go to the mini market. We can grab something to drink, sit down, and talk this out. Okay? Just you and me. No judgments, no pressure. Let\'s do this.\'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Location Change / Settling In] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]'}
2025-04-23 01:09:46,463 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories called ---
2025-04-23 01:09:46,463 - DEBUG    - memory.vector   - Query text: 'O-Okay... *I just step out of the classroom, looking outside* Topic: Location Change / Settling In...'
2025-04-23 01:09:46,463 - DEBUG    - memory.vector   - k: 5, threshold: None
2025-04-23 01:09:46,485 - DEBUG    - memory.vector   - Query embedding shape: (1, 384)
2025-04-23 01:09:46,485 - DEBUG    - memory.vector   - Searching FAISS index with k=5
2025-04-23 01:09:46,486 - DEBUG    - memory.vector   - FAISS search results - Distances: [[0.9411229 1.1936231 1.205854  1.2799231 1.3449557]], IDs: [[ 6  4 18  2  9]]
2025-04-23 01:09:46,486 - DEBUG    - memory.vector   - Retrieved relevant memory ID 6 with distance 0.9411228895187378
2025-04-23 01:09:46,486 - DEBUG    - memory.vector   - Retrieved relevant memory ID 4 with distance 1.1936230659484863
2025-04-23 01:09:46,487 - DEBUG    - memory.vector   - Retrieved relevant memory ID 18 with distance 1.205854058265686
2025-04-23 01:09:46,487 - DEBUG    - memory.vector   - Retrieved relevant memory ID 2 with distance 1.2799230813980103
2025-04-23 01:09:46,487 - DEBUG    - memory.vector   - Retrieved relevant memory ID 9 with distance 1.3449556827545166
2025-04-23 01:09:46,487 - INFO     - memory.vector   - Retrieved 5 relevant memories for query.
2025-04-23 01:09:46,487 - DEBUG    - memory.vector   - --- VectorMemory: retrieve_relevant_memories finished ---
2025-04-23 01:10:53,625 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory called ---
2025-04-23 01:10:53,625 - DEBUG    - memory.dynamic  - Input memory: 'User: 'O-Okay... *I just step out of the classroom, looking outside*'. Poppy: '*Poppy takes a deep, ...'
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Current dynamic memory state (before add): ['User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'B-But... I know I said we should go to certain place because I wanted to show you, but I don\'t know what i was...\'. Poppy: \'*Poppy\'s eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it\'s okay. Just tell me what\'s on your mind."*\n\n*Poppy\'s voice softens a little, her eyes meeting yours with a mix of frustration and concern.*\n\nLook, I get it. You\'re confused, and I\'m not making this any easier. But we need to figure this out together. If you can\'t remember where we were supposed to go, that\'s fine. Let\'s just go somewhere quiet. The mini market is close, and it\'s usually pretty empty this time of day. We can talk there. Just... just tell me what you\'re thinking. What\'s been on your mind lately? Because I can see you\'re struggling, and I want to help. Even if I come off as a jerk sometimes, I do care. So, let\'s go to the mini market. We can grab something to drink, sit down, and talk this out. Okay? Just you and me. No judgments, no pressure. Let\'s do this.\'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Location Change / Settling In] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]']
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Relevance check for 'User: 'O-Okay... *I just step out of the classroom...': True
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Is new memory relevant? True
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Is memory already in active? False
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Dynamic memory state (after add): ['User: \'*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we were going to some place at 3PM...\'. Poppy: \'*Poppy\'s eyes widen briefly before she looks down, her voice tightening as she stands up abruptly, her backpack slung over her shoulder.*\n\n"Yeah, I remember. You\'re right, we did say that. *Poppy\'s voice is strained, her eyes darting around nervously.* But things got... complicated. *She swallows hard, her grip tightening on her backpack strap.* Look, I know this isn\'t easy for either of us, but we can\'t just ignore what\'s happening here. You need help, and I... I need to know you\'re going to be okay. *Her voice softens slightly, a hint of genuine concern breaking through her usual snark.* So, let\'s go somewhere we can talk more privately. But promise me you\'ll think about what I said. Promise me you\'ll consider talking to someone who can actually help you through this. Because I... I can\'t do this alone. I can\'t be the only one trying to fix this. *She takes a deep, shuddering breath, her eyes meeting yours with a mix of determination and fear.* So, what do you say? Can we do this? Can we find a place to talk more?\'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'B-But... I know I said we should go to certain place because I wanted to show you, but I don\'t know what i was...\'. Poppy: \'*Poppy\'s eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it\'s okay. Just tell me what\'s on your mind."*\n\n*Poppy\'s voice softens a little, her eyes meeting yours with a mix of frustration and concern.*\n\nLook, I get it. You\'re confused, and I\'m not making this any easier. But we need to figure this out together. If you can\'t remember where we were supposed to go, that\'s fine. Let\'s just go somewhere quiet. The mini market is close, and it\'s usually pretty empty this time of day. We can talk there. Just... just tell me what you\'re thinking. What\'s been on your mind lately? Because I can see you\'re struggling, and I want to help. Even if I come off as a jerk sometimes, I do care. So, let\'s go to the mini market. We can grab something to drink, sit down, and talk this out. Okay? Just you and me. No judgments, no pressure. Let\'s do this.\'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Location Change / Settling In] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'O-Okay... *I just step out of the classroom, looking outside*'. Poppy: '*Poppy takes a deep, shaky breath, her eyes flicking nervously around the Mini Market as she waits for Lin to continue, her hands clenching and unclenching at her sides.*\n\nAlright, let's get this over with. So, what's been on your mind, Lin? You look like you've got a lot weighing on you. I'm not exactly known for my patience, so let's not drag this out. What do you want to talk about?'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Proposing relevant memory to active: 'User: 'O-Okay... *I just step out of the classroom, looking outside*'....'
2025-04-23 01:10:53,626 - DEBUG    - memory.active   - --- ActiveMemory: add_memory called ---
2025-04-23 01:10:53,626 - DEBUG    - memory.active   - Input memory: 'User: 'O-Okay... *I just step out of the classroom, looking outside*'. Poppy: '*Poppy takes a deep, ...'
2025-04-23 01:10:53,626 - DEBUG    - memory.active   - Current active memory state (before add, size 15): [Too long to log fully]
2025-04-23 01:10:53,626 - INFO     - memory.active   - Added to active memory: 'User: 'O-Okay... *I just step out of the classroom, looking outside*'....'
2025-04-23 01:10:53,626 - DEBUG    - memory.active   - Active memory state (after add, size 16): [Too long to log fully]
2025-04-23 01:10:53,626 - DEBUG    - memory.active   - Message count incremented to: 16
2025-04-23 01:10:53,626 - DEBUG    - memory.active   - --- ActiveMemory: add_memory finished ---
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Popped oldest memory: 'User: '*I just sigh moving away from your shoulder to then take my backpack and stand up* We said we...'
2025-04-23 01:10:53,626 - DEBUG    - memory.dynamic  - Dynamic memory state (after pop): ["User: 'I cannot promise things... Let's just go to somewhere else... I sad a restaurant or market? I didn't relly remember if I said that or something else'. Poppy: '*Poppy's shoulders slump slightly as she lets out a heavy sigh, her eyes darting around the room before settling on Lin, her expression a mix of frustration and resignation.*\n\nYou know what? Fine. If you can't promise anything right now, at least let's get out of here. A restaurant or a market, whatever. Just somewhere we can talk without feeling like the walls are closing in. I can't handle much more of this right now. Let's just go.'. [Loc: School] [Act: Talking] [Topic: Personal/Emotional Discussion] [Pending: Mini Market] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]", 'User: \'B-But... I know I said we should go to certain place because I wanted to show you, but I don\'t know what i was...\'. Poppy: \'*Poppy\'s eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it\'s okay. Just tell me what\'s on your mind."*\n\n*Poppy\'s voice softens a little, her eyes meeting yours with a mix of frustration and concern.*\n\nLook, I get it. You\'re confused, and I\'m not making this any easier. But we need to figure this out together. If you can\'t remember where we were supposed to go, that\'s fine. Let\'s just go somewhere quiet. The mini market is close, and it\'s usually pretty empty this time of day. We can talk there. Just... just tell me what you\'re thinking. What\'s been on your mind lately? Because I can see you\'re struggling, and I want to help. Even if I come off as a jerk sometimes, I do care. So, let\'s go to the mini market. We can grab something to drink, sit down, and talk this out. Okay? Just you and me. No judgments, no pressure. Let\'s do this.\'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Location Change / Settling In] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]', "User: 'O-Okay... *I just step out of the classroom, looking outside*'. Poppy: '*Poppy takes a deep, shaky breath, her eyes flicking nervously around the Mini Market as she waits for Lin to continue, her hands clenching and unclenching at her sides.*\n\nAlright, let's get this over with. So, what's been on your mind, Lin? You look like you've got a lot weighing on you. I'm not exactly known for my patience, so let's not drag this out. What do you want to talk about?'. [Loc: Mini Market] [Act: Settling in new location] [Topic: Personal/Emotional Discussion] [Pending: None] [Emo: Fatigued, Inauthentic, Ashamed, Unsafe, Powerless, Anticipating, Joyful, Isolated, Fearful, Invalidated] [Fatigue: 100.0] [Sleeping: False]"]
2025-04-23 01:10:53,627 - INFO     - memory.dynamic  - Added to dynamic: 'User: 'O-Okay... *I just step out of the classroom, looking outside*'....' | Proposed relevant to active. | Popped oldest due to capacity: 'User: '*I just sigh moving away from your shoulder to then take my bac...'
2025-04-23 01:10:53,627 - DEBUG    - memory.dynamic  - --- DynamicMemory: add_memory finished ---
2025-04-23 01:10:53,627 - DEBUG    - memory.vector   - --- VectorMemory: add_memory called ---
2025-04-23 01:10:53,627 - DEBUG    - memory.vector   - Input text: 'User: 'O-Okay... *I just step out of the classroom, looking outside*'
Poppy: '*Poppy takes a deep, s...'
2025-04-23 01:10:53,627 - DEBUG    - memory.vector   - Metadata: {'timestamp': 1745392253.6271935, 'roleplay_time': '2025-04-16T16:56:36.291623', 'location': 'Mini Market', 'action': 'Settling in new location', 'topic': 'Personal/Emotional Discussion', 'emotions': {'vulnerability': 0.06, 'connection': 0.01, 'autonomy': 0.04, 'validation': 0.01, 'authenticity': 0.01, 'psychological_safety': 0.02, 'grieving': 0.46, 'joy': 0.88, 'anger': 0.26, 'fear': 0.99, 'shame': 0.85, 'anticipation': 0.76, 'disgust': 0.1}, 'fatigue': 100.0, 'is_sleeping': False}
2025-04-23 01:10:53,671 - DEBUG    - memory.vector   - Generated embedding shape: (1, 384)
2025-04-23 01:10:53,672 - INFO     - memory.vector   - Added memory ID 19 to store and FAISS index. Index size: 20
2025-04-23 01:10:53,672 - DEBUG    - memory.vector   - --- VectorMemory: add_memory finished ---
2025-04-23 01:10:53,672 - DEBUG    - memory.logic_interface - Setting last narrative action in DynamicMemory: *Poppy takes a deep, shaky breath, her eyes flicking nervously around the Mini Market as she waits for Lin to continue, her hands clenching and unclenching at her sides.*
2025-04-23 01:10:53,672 - DEBUG    - memory.dynamic  - Updated last_narrative_action from '*Poppy's eyes soften briefly before she rubs her temples, her voice trembling slightly as she interrupts, "Lin, it's okay. Just tell me what's on your mind."*' to '*Poppy takes a deep, shaky breath, her eyes flicking nervously around the Mini Market as she waits for Lin to continue, her hands clenching and unclenching at her sides.*'
2025-04-23 01:12:02,950 - INFO     - memory.vector   - Saving FAISS index to memory_index.faiss and data to memory_data.json...
2025-04-23 01:12:02,950 - DEBUG    - memory.vector   - Writing FAISS index with 20 vectors.
2025-04-23 01:12:02,955 - INFO     - memory.vector   - Memory saved successfully.
